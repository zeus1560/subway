# 서울 지하철 혼잡도 앱 실행 가이드

## 📋 필수 요구사항

- **Node.js**: 18 이상 버전 필요
- **npm**: Node.js와 함께 설치됨

## 🚀 실행 방법

### 1. 개발 서버 실행

```bash
npm run dev
```

또는 네트워크에서 접근 가능하게 실행:

```bash
npm run dev:network
```

서버가 시작되면 브라우저에서 다음 주소로 접속:

- **로컬**: http://localhost:4000
- **네트워크**: http://[본인IP]:4000

### 2. 프로덕션 빌드

```bash
npm run build
npm start
```

## 📁 프로젝트 구조

```
station1/
├── app/                    # Next.js App Router 페이지
│   ├── api/               # API 라우트
│   │   └── train/
│   │       └── congestion/
│   │           └── route.ts  # 열차 칸별 혼잡도 API
│   ├── board/             # 게시판 기능
│   ├── comparison/        # 시간대별 비교 페이지
│   ├── lines/             # 열차 칸별 혼잡도 페이지
│   ├── map/               # 지하철 지도 페이지
│   ├── stations/          # 역 정보 페이지
│   ├── train-congestion-demo/  # 혼잡도 데모
│   ├── train-recommendation/   # AI 추천 페이지
│   └── page.tsx           # 메인 홈페이지
├── components/            # 재사용 가능한 컴포넌트
│   ├── BottomNavigation.tsx
│   ├── PersonalizedDashboard.tsx
│   ├── VoiceButton.tsx
│   └── ...
├── lib/                   # 유틸리티 및 API 함수
│   ├── api.ts            # 서울시 API 연동
│   ├── authService.ts    # 인증 서비스 (localStorage 기반)
│   ├── weatherService.ts # 날씨/이벤트 데이터
│   └── ...
└── package.json          # 프로젝트 설정 및 의존성
```

## 🔑 API 설정

### 서울시 공공데이터 API

**환경 변수로 관리 (권장):**

1. 프로젝트 루트에 `.env.local` 파일 생성
2. 다음 내용 추가:
   ```
   NEXT_PUBLIC_SEOUL_API_KEY=발급받은_API_키
   ```
3. 개발 서버 재시작

**API 키 발급 방법:**

1. 서울시 공공데이터포털 (https://data.seoul.go.kr) 접속
2. 회원가입 및 로그인
3. "CardSubwayStatsNew" API 신청
4. 발급받은 API 키를 `.env.local` 파일에 입력

> ✅ **완료**: `lib/api.ts`에서 환경 변수를 사용하도록 수정되었습니다.  
> 환경 변수가 없으면 기본값을 사용하며, 경고 로그가 출력됩니다.

## ⚠️ 주의사항

1. **API 실패 시**: 실제 API 호출이 실패하면 시간대 기반 계산 데이터를 사용합니다.
2. **인증 시스템**: 현재 localStorage 기반의 간단한 인증을 사용합니다. 프로덕션에서는 NextAuth 등 사용 권장.
3. **날씨 데이터**: 현재 모의 데이터를 사용합니다. 실제 날씨 API 연동 필요 시 수정 필요.

## 🎯 주요 기능

- ✅ 역별 실시간 혼잡도 조회
- ✅ 시간대별 혼잡도 비교
- ✅ 열차 칸별 혼잡도 시각화
- ✅ AI 기반 최적 탑승 칸 추천
- ✅ 즐겨찾기 기능
- ✅ 개인화 대시보드
- ✅ 음성 검색 기능
- ✅ 다크 모드 지원

## 🐛 문제 해결

### 포트 4000이 이미 사용 중인 경우

```bash
# 다른 포트로 실행
npx next dev -p 3000
```

### 의존성 설치 오류

```bash
# node_modules 삭제 후 재설치
rm -rf node_modules package-lock.json
npm install
```

### 빌드 오류

```bash
# 캐시 삭제 후 재빌드
rm -rf .next
npm run build
```
